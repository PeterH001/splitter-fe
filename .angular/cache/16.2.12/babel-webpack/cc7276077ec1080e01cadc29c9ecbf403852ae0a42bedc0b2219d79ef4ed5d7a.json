{"ast":null,"code":"export function percentSumValidator(distributionControlName) {\n  return control => {\n    const distributionControl = control?.parent?.get(distributionControlName);\n    let sum = 0;\n    const value = control.value;\n    if (!distributionControl) {\n      return null;\n    }\n    if (distributionControl.value === 'proportional') {\n      value.forEach(memberObj => {\n        //erre a kasztolgatásra azért van szükség, mert hiába number a typeja elvileg, de gyakorlatilag string értéket kap a sum\n        const percentString = memberObj.percent.toString();\n        sum += parseInt(percentString);\n      });\n      console.log(\"sum: \", sum);\n      if (sum > 100) {\n        return {\n          tooMuch: true\n        };\n      } else if (sum < 100) {\n        return {\n          tooShort: true\n        };\n      } else {\n        return null;\n      }\n    }\n    return null;\n  };\n}","map":{"version":3,"names":["percentSumValidator","distributionControlName","control","distributionControl","parent","get","sum","value","forEach","memberObj","percentString","percent","toString","parseInt","console","log","tooMuch","tooShort"],"sources":["C:\\Users\\Peti\\nest_projects\\splitwise\\frontend\\splitter-fe\\src\\app\\expense\\validators\\percent-sum.validator.ts"],"sourcesContent":["import { ValidatorFn, AbstractControl, ValidationErrors } from \"@angular/forms\";\r\n\r\nexport function percentSumValidator(distributionControlName: string): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const distributionControl = control?.parent?.get(distributionControlName) as AbstractControl;\r\n      let sum: number = 0;\r\n      const value: { userId: number; percent: number }[] = control.value;\r\n      if(!distributionControl){\r\n        return null;\r\n      }\r\n  \r\n      if(distributionControl.value === 'proportional'){\r\n        value.forEach((memberObj) => {\r\n          //erre a kasztolgatásra azért van szükség, mert hiába number a typeja elvileg, de gyakorlatilag string értéket kap a sum\r\n          const percentString =  memberObj.percent.toString();\r\n          sum += parseInt(percentString);\r\n          \r\n          \r\n        });\r\n        console.log(\"sum: \", sum);\r\n        \r\n        if (sum > 100) {\r\n          return { tooMuch: true };\r\n        } else if (sum < 100) {\r\n          return { tooShort: true };\r\n        }else{\r\n          return null;\r\n        }\r\n      }\r\n      \r\n      return null;\r\n    };\r\n  }"],"mappings":"AAEA,OAAM,SAAUA,mBAAmBA,CAACC,uBAA+B;EAC/D,OAAQC,OAAwB,IAA6B;IAC3D,MAAMC,mBAAmB,GAAGD,OAAO,EAAEE,MAAM,EAAEC,GAAG,CAACJ,uBAAuB,CAAoB;IAC5F,IAAIK,GAAG,GAAW,CAAC;IACnB,MAAMC,KAAK,GAA0CL,OAAO,CAACK,KAAK;IAClE,IAAG,CAACJ,mBAAmB,EAAC;MACtB,OAAO,IAAI;;IAGb,IAAGA,mBAAmB,CAACI,KAAK,KAAK,cAAc,EAAC;MAC9CA,KAAK,CAACC,OAAO,CAAEC,SAAS,IAAI;QAC1B;QACA,MAAMC,aAAa,GAAID,SAAS,CAACE,OAAO,CAACC,QAAQ,EAAE;QACnDN,GAAG,IAAIO,QAAQ,CAACH,aAAa,CAAC;MAGhC,CAAC,CAAC;MACFI,OAAO,CAACC,GAAG,CAAC,OAAO,EAAET,GAAG,CAAC;MAEzB,IAAIA,GAAG,GAAG,GAAG,EAAE;QACb,OAAO;UAAEU,OAAO,EAAE;QAAI,CAAE;OACzB,MAAM,IAAIV,GAAG,GAAG,GAAG,EAAE;QACpB,OAAO;UAAEW,QAAQ,EAAE;QAAI,CAAE;OAC1B,MAAI;QACH,OAAO,IAAI;;;IAIf,OAAO,IAAI;EACb,CAAC;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}